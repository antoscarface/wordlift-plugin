"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[562],{3562:(tt,m,i)=>{i.r(m),i.d(m,{PostsModule:()=>c});var g=i(6895),u=i(8176),v=i(7579),x=i(8505),y=i(4351),T=i(9635),w=i(5698),Z=i(9300),b=i(6150),t=i(4650),O=i(6712),h=i(433),C=i(8800),r=i(13),P=i(545),A=i(5087),J=i(1354),I=i(1723),_=i(8231),M=i(7423),S=i(5505),z=i(7570);function N(o,e){1&o&&t.GkF(0)}function E(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"wlx-filters",19),t.NdJ("filterChange",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.filter=a)})("filterChange",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.cursor.next(""))}),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("filter",n.filter)("stats",n.stats)}}function F(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",9)(1,"p",10),t._uU(2),t.qZA(),t.YNc(3,E,1,2,"wlx-filters",11),t.TgZ(4,"nz-select",12),t.NdJ("ngModelChange",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.postStatus=a)})("ngModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.reload())}),t._UZ(5,"nz-option",13)(6,"nz-option",14)(7,"nz-option",15),t.qZA(),t.TgZ(8,"nz-select",16),t.NdJ("ngModelChange",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.sort=a)})("ngModelChange",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.reload())}),t._UZ(9,"nz-option",17)(10,"nz-option",18),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(2),t.AsE("",n.stats.total," ",n.stats.label,""),t.xp6(1),t.Q6J("ngIf",n.page),t.xp6(1),t.Q6J("ngModel",n.postStatus),t.xp6(1),t.Q6J("nzValue",void 0),t.xp6(3),t.Q6J("ngModel",n.sort)}}const Q=function(){return{width:325}},U=function(){return{width:100}};function L(o,e){if(1&o&&(t.TgZ(0,"tr",21)(1,"td"),t._UZ(2,"nz-skeleton",22),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-skeleton",22),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(2),t.Q6J("nzActive",!0)("nzLoading",n.loading)("nzParagraph",!1)("nzTitle",t.DdM(8,Q)),t.xp6(2),t.Q6J("nzActive",!0)("nzLoading",n.loading)("nzParagraph",!1)("nzTitle",t.DdM(9,U))}}function H(o,e){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,L,5,10,"tr",20),t.qZA()),2&o){t.oxw();const n=t.MAs(8);t.xp6(1),t.Q6J("ngForOf",n.data)}}function Y(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1," \u2013 Draft"),t.qZA())}function G(o,e){if(1&o&&(t.TgZ(0,"a",31),t._uU(1,"Edit"),t.qZA()),2&o){const n=t.oxw().$implicit;t.s9C("href",n.post_link,t.LSH)}}function D(o,e){if(1&o&&(t.TgZ(0,"a",31),t._uU(1,"View"),t.qZA()),2&o){const n=t.oxw().$implicit;t.s9C("href",n.view_link,t.LSH)}}function V(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr",24)(1,"td")(2,"a",25),t._uU(3),t.qZA(),t.YNc(4,Y,2,0,"span",0),t.TgZ(5,"div",26)(6,"div",27),t.YNc(7,G,2,1,"a",28),t.YNc(8,D,2,1,"a",28),t.qZA()()(),t.TgZ(9,"td",29)(10,"wlx-main-ingredient",30),t.NdJ("onMainIngredientChange",function(a){const f=t.CHM(n).$implicit,q=t.oxw(2);return t.KtG(q.changeEntity(f,a))})("onStartEdit",function(){const l=t.CHM(n).$implicit,f=t.oxw(2);return t.KtG(f.startEdit(l.id))})("onStopEdit",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.stopEdit())}),t.qZA()()()}if(2&o){const n=e.$implicit,s=e.index,a=t.oxw(2);t.xp6(2),t.Q6J("href",n.post_link,t.LSH),t.xp6(1),t.Oqu(n.post_title),t.xp6(1),t.Q6J("ngIf","draft"===n.post_status),t.xp6(3),t.Q6J("ngIf",n.post_link),t.xp6(1),t.Q6J("ngIf",n.view_link),t.xp6(2),t.Q6J("wlxCyId","AutoCompleteField"+s)("data",n)("editMode",a.editId===n.id)}}function $(o,e){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,V,11,8,"tr",23),t.qZA()),2&o){t.oxw();const n=t.MAs(8);t.xp6(1),t.Q6J("ngForOf",n.data)}}const K=function(){return[]};class p{constructor(e,n){this.appSettings=e,this.postMatchesService=n,this.Number=Number,this.loading=!0,this.editId=null,this.perPage={value:10},this.sort="-date_modified_gmt",this.cursor=new v.x,this.cursor$=this.cursor.asObservable().pipe((0,x.b)(()=>this.loading=!0),(0,Z.h)(s=>null!=s),(0,y.b)(s=>this.postMatchesService.listPostMatches({cursor:s,has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort})),(0,T.z)((0,x.b)(s=>{this.page=s,this.loading=!1}))),this.stats=e.stats.find(s=>"Posts"===s.label)}ngOnInit(){this.reload()}reload(){this.loading=!0,this.postMatchesService.listPostMatches({has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort}).subscribe(e=>{this.page=e,this.loading=!1})}changeEntity(e,n){console.log("changeEntity",{data:e}),(Number.isInteger(e.match_id)?this.postMatchesService.updatePostMatch({post_id:e.id,match_id:e.match_id,body:n}):this.postMatchesService.createPostMatch({post_id:e.id,body:n})).pipe((0,w.q)(1)).subscribe()}startEdit(e){this.editId=e}stopEdit(){this.editId=null}}p.\u0275fac=function(e){return new(e||p)(t.Y36(b.N),t.Y36(O.D))},p.\u0275cmp=t.Xpm({type:p,selectors:[["wlx-posts"]],decls:19,vars:16,consts:[[4,"ngIf"],["nz-typography","","id","heading"],["nz-typography","","nzType","secondary","id","description"],["id","filters",4,"ngIf"],[3,"nzData","nzNoResult","nzShowPagination","nzFrontPagination","nzTotal","nzLoading"],["basicTable",""],["nzWidth","369.33px",1,"table-header"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The main entity matching the post title.",1,"tooltip"],["wlxCy","","wlxCyId","PostsPagination",3,"page","cursor","perPage"],["id","filters"],["id","count"],["wlxCy","","wlxCyId","PostsFilters",3,"filter","stats","filterChange",4,"ngIf"],[1,"post_status",3,"ngModel","ngModelChange"],["nzLabel","",3,"nzValue"],["nzValue","publish","nzLabel","Published"],["nzValue","draft","nzLabel","Drafts"],[1,"date_modified",3,"ngModel","ngModelChange"],["nzValue","-date_modified_gmt","nzLabel","Newest First"],["nzValue","+date_modified_gmt","nzLabel","Oldest First"],["wlxCy","","wlxCyId","PostsFilters",3,"filter","stats","filterChange"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"nzActive","nzLoading","nzParagraph","nzTitle"],["class","table-row editable-row",4,"ngFor","ngForOf"],[1,"table-row","editable-row"],["target","_blank",3,"href"],[1,"links-main"],[1,"links"],["class","links-item","target","_blank",3,"href",4,"ngIf"],[1,"autocomplete-input-column"],["wlxCy","","datasetUri","https://knowledge.cafemedia.com/gardening/",1,"autocomplete-input","editable-cell",3,"wlxCyId","data","editMode","onMainIngredientChange","onStartEdit","onStopEdit"],["target","_blank",1,"links-item",3,"href"]],template:function(e,n){1&e&&(t.YNc(0,N,1,0,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3,"Posts"),t.qZA(),t.TgZ(4,"p",2),t._uU(5,' This is the list of the Posts. For each Post, WordLift matched the main entity which will show in the Structured Data "about" property To assign a new entity, click on the name (or on the dash) and start typing to select it from the list. Then click anywhere to accept the change.\n'),t.qZA(),t.YNc(6,F,11,6,"div",3),t.TgZ(7,"nz-table",4,5)(9,"thead")(10,"tr")(11,"th",6),t._uU(12," Post Title "),t.qZA(),t.TgZ(13,"th",6),t._uU(14," Matched Entity "),t._UZ(15,"span",7),t.qZA()()(),t.YNc(16,H,2,1,"tbody",0),t.YNc(17,$,2,1,"tbody",0),t.qZA(),t._UZ(18,"wlx-pagination",8)),2&e&&(t.Q6J("ngIf",t.lcZ(1,13,n.cursor$)),t.xp6(6),t.Q6J("ngIf",n.page),t.xp6(1),t.Q6J("nzData",n.page&&n.page.items?n.page.items:t.DdM(15,K))("nzNoResult",void 0)("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",n.Number.MAX_SAFE_INTEGER)("nzLoading",n.loading),t.xp6(9),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("page",n.page)("cursor",n.cursor)("perPage",n.perPage))},dependencies:[g.sg,g.O5,h.JJ,h.On,C.ZU,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,P.ng,A.Q,J.l,I.b,_.Ip,_.Vq,M.Ls,S.N,z.SY,g.Ov],styles:[".editable-cell[_ngcontent-%COMP%]{position:relative;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px}.editable-cell[_ngcontent-%COMP%]:focus-within{border:none}#heading[_ngcontent-%COMP%]{font-weight:600;font-size:20px;line-height:32px}wlx-pagination[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]{width:100%;flex-direction:row;display:flex;align-items:center;margin-top:18px;margin-bottom:16px}#count[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:19px;color:#00000073;margin:0}wlx-filters[_ngcontent-%COMP%]{margin-left:auto}#description[_ngcontent-%COMP%]{text-align:justify;font-weight:400;font-size:16px;line-height:24px;color:#000000a6;width:600px}.autocomplete-input[_ngcontent-%COMP%]{width:320px;height:32px;display:block}.autocomplete-input-column[_ngcontent-%COMP%]{padding:16px}.table-header[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0}.tooltip[_ngcontent-%COMP%]{cursor:pointer;margin:4px 3px;color:#00000073}.post_status[_ngcontent-%COMP%]{min-width:105px;margin-left:8px;margin-right:8px}.items_sort[_ngcontent-%COMP%]{min-width:164px;margin-left:8px}.links[_ngcontent-%COMP%]{display:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:21px;height:16px;color:#007aff;font-style:normal;font-weight:400;font-size:12px;line-height:16px}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{border-right:1px solid rgba(0,0,0,.15);margin-right:6px;padding-right:6px}td[_ngcontent-%COMP%]{height:80px}.links-main[_ngcontent-%COMP%]{height:16px}td[_ngcontent-%COMP%]:hover   .links[_ngcontent-%COMP%]{display:block}"]});const R=[{path:"",pathMatch:"full",redirectTo:"posts"},{path:"posts",data:{breadcrumb:"Posts"},component:p}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[u.Bz.forChild(R),u.Bz]});var j=i(2271),B=i(5635),k=i(4586),W=i(2383),X=i(5540);class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[g.ez,h.u5,d,C.ZJ,r.HQ,P.H0,j.m,_.LV,B.o7,k.D,W.ic,M.PV,X.o,z.cg]})}}]);