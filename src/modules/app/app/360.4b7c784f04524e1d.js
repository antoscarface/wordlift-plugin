"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[360],{6360:(tt,f,i)=>{i.r(f),i.d(f,{RecipesModule:()=>X});var p=i(6895),m=i(8176),z=i(7579),_=i(8505),v=i(4351),T=i(9635),w=i(5698),y=i(9300),Z=i(6150),t=i(4650),P=i(6712),c=i(433),u=i(8800),l=i(13),x=i(545),R=i(5087),A=i(1354),b=i(1723),d=i(8231),C=i(7423),O=i(5505),I=i(3304),J=i(36),M=i(7570);function S(n,a){1&n&&t.GkF(0)}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"wlx-filters",21),t.NdJ("filterChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.filter=s)})("filterChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.cursor.next(""))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("filter",e.filter)("stats",e.stats)}}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"p",12),t._uU(2),t.qZA(),t.YNc(3,N,1,2,"wlx-filters",13),t.TgZ(4,"nz-select",14),t.NdJ("ngModelChange",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.postStatus=s)})("ngModelChange",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reload())}),t._UZ(5,"nz-option",15)(6,"nz-option",16)(7,"nz-option",17),t.qZA(),t.TgZ(8,"nz-select",18),t.NdJ("ngModelChange",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.sort=s)})("ngModelChange",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reload())}),t._UZ(9,"nz-option",19)(10,"nz-option",20),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.AsE("",e.stats.total," ",e.stats.label,""),t.xp6(1),t.Q6J("ngIf",e.page),t.xp6(1),t.Q6J("ngModel",e.postStatus),t.xp6(1),t.Q6J("nzValue",void 0),t.xp6(3),t.Q6J("ngModel",e.sort)}}const g=function(){return{rows:1}};function F(n,a){1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"nz-skeleton",24),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-skeleton",24),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nz-skeleton",24),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(9,g))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(10,g))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(11,g))("nzTitle",!1))}function U(n,a){if(1&n&&(t.TgZ(0,"tbody",22),t.YNc(1,F,7,12,"tr",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.skeletonRows)}}function E(n,a){1&n&&(t.TgZ(0,"span",35),t._uU(1," \u2013 Draft"),t.qZA())}function H(n,a){if(1&n&&(t.TgZ(0,"a",36),t._uU(1,"Edit"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("href",e.parent_post_link,t.LSH)}}function Y(n,a){if(1&n&&(t.TgZ(0,"a",36),t._uU(1,"View"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("href",e.view_link,t.LSH)}}function L(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",26)(1,"td")(2,"a",27),t._uU(3),t.qZA(),t.YNc(4,E,2,0,"span",28),t.TgZ(5,"div",29)(6,"div",30),t.YNc(7,H,2,1,"a",31),t.YNc(8,Y,2,1,"a",31),t.qZA()()(),t.TgZ(9,"td",32),t._uU(10),t.qZA(),t.TgZ(11,"td",33)(12,"wlx-main-ingredient",34),t.NdJ("onMainIngredientChange",function(s){const h=t.CHM(e).$implicit,q=t.oxw(2);return t.KtG(q.ingredientChange(h,s))})("onStartEdit",function(){const r=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.startEdit(r.id))})("onStopEdit",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.stopEdit())}),t.qZA()()()}if(2&n){const e=a.$implicit,o=a.index,s=t.oxw(2);t.xp6(2),t.Q6J("href",e.parent_post_link,t.LSH),t.xp6(1),t.Oqu(e.parent_post_title),t.xp6(1),t.Q6J("ngIf","draft"===e.post_status),t.xp6(3),t.Q6J("ngIf",e.parent_post_link),t.xp6(1),t.Q6J("ngIf",e.view_link),t.xp6(2),t.hij(" ",e.post_title," "),t.xp6(2),t.Q6J("wlxCyId","AutoCompleteField"+o)("data",e)("editMode",s.editId===e.id)}}function D(n,a){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,L,13,9,"tr",25),t.qZA()),2&n){t.oxw();const e=t.MAs(8);t.xp6(1),t.Q6J("ngForOf",e.data)}}const G=function(){return[]},V=[{path:"",pathMatch:"full",redirectTo:"recipes"},{path:"recipes",data:{breadcrumb:"Recipes"},component:(()=>{class n{constructor(e,o){this.appSettings=e,this.postMatchesService=o,this.loading=!0,this.editId=null,this.perPage={value:10},this.postStatus="publish",this.sort="-date_modified_gmt",this.skeletonRows=[],this.cursor=new z.x,this.cursor$=this.cursor.asObservable().pipe((0,y.h)(s=>null!=s),(0,_.b)(()=>{this.skeletonRows=Array(this.perPage.value),this.loading=!0}),(0,v.b)(s=>this.postMatchesService.listPostMatches({post_types:["wprm_recipe"],cursor:s,has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort})),(0,T.z)((0,_.b)(s=>{this.page=s,this.loading=!1}))),this.Number=Number,this.stats=e.stats.find(s=>"Recipes"===s.label)}ngOnInit(){this.reload()}reload(){this.skeletonRows=Array(this.perPage.value),this.loading=!0,this.postMatchesService.listPostMatches({post_types:["wprm_recipe"],has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort}).subscribe(e=>{this.page=e,this.loading=!1})}ingredientChange(e,o){(Number.isInteger(e.match_id)?this.postMatchesService.updatePostMatch({post_id:e.id,match_id:e.match_id,body:o}):this.postMatchesService.createPostMatch({post_id:e.id,body:o})).pipe((0,w.q)(1)).subscribe()}startEdit(e){this.editId=e}stopEdit(){this.editId=null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.N),t.Y36(P.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["wlx-recipes"]],decls:21,vars:15,consts:[[4,"ngIf"],["nz-typography","","id","heading"],["nz-typography","","nzType","secondary","id","description"],["id","filters",4,"ngIf"],[3,"nzData","nzNoResult","nzShowPagination","nzFrontPagination","nzTotal"],["basicTable",""],[1,"table-header"],[1,"fixed-size"],["nz-icon","","nz-tooltip","","nzTooltipTitle","The main ingredient entity matching the recipe title.","nzType","question-circle","nzTheme","outline",1,"tooltip"],["wlxHideTablePlaceholder","",4,"ngIf"],["wlxCy","","wlxCyId","RecipesPagination",3,"page","cursor","perPage"],["id","filters"],["id","count"],["wlxCy","","wlxCyId","RecipesFilters",3,"filter","stats","filterChange",4,"ngIf"],[1,"post_status",3,"ngModel","ngModelChange"],["nzLabel","All",3,"nzValue"],["nzValue","publish","nzLabel","Published"],["nzValue","draft","nzLabel","Drafts"],[3,"ngModel","ngModelChange"],["nzValue","-date_modified_gmt","nzLabel","Newest First"],["nzValue","+date_modified_gmt","nzLabel","Oldest First"],["wlxCy","","wlxCyId","RecipesFilters",3,"filter","stats","filterChange"],["wlxHideTablePlaceholder",""],[4,"ngFor","ngForOf"],["wlxSkeletonWidth","",3,"nzActive","nzParagraph","nzTitle"],["class","table-row editable-row",4,"ngFor","ngForOf"],[1,"table-row","editable-row"],["target","_blank",3,"href"],["class","recipes-draft",4,"ngIf"],[1,"links-main"],[1,"links"],["class","links-item","target","_blank",3,"href",4,"ngIf"],[1,"td-align"],[1,"autocomplete-input-column","td-align"],["wlxCy","","datasetUri","https://knowledge.cafemedia.com/food/",3,"wlxCyId","data","editMode","onMainIngredientChange","onStartEdit","onStopEdit"],[1,"recipes-draft"],["target","_blank",1,"links-item",3,"href"]],template:function(e,o){1&e&&(t.YNc(0,S,1,0,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3,"Recipes"),t.qZA(),t.TgZ(4,"p",2),t._uU(5,' For each Recipe, WordLift matched the main ingredient which appears in the Structured Data "about" property. To assign a new ingredient, click on the name (or on the dash) and start typing to select it from the list. Then click anywhere to confirm the change.\n'),t.qZA(),t.YNc(6,Q,11,6,"div",3),t.TgZ(7,"nz-table",4,5)(9,"thead")(10,"tr")(11,"th",6),t._uU(12,"Post Title"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Recipe Name"),t.qZA(),t.TgZ(15,"th",7),t._uU(16," Matched Ingredient "),t._UZ(17,"span",8),t.qZA()()(),t.YNc(18,U,2,1,"tbody",9),t.YNc(19,D,2,1,"tbody",0),t.qZA(),t._UZ(20,"wlx-pagination",10)),2&e&&(t.Q6J("ngIf",t.lcZ(1,12,o.cursor$)),t.xp6(6),t.Q6J("ngIf",o.page),t.xp6(1),t.Q6J("nzData",o.page&&o.page.items?o.page.items:t.DdM(14,G))("nzNoResult",void 0)("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",o.Number.MAX_SAFE_INTEGER),t.xp6(11),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("page",o.page)("cursor",o.cursor)("perPage",o.perPage))},dependencies:[p.sg,p.O5,c.JJ,c.On,u.ZU,l.N8,l.Uo,l._C,l.Om,l.p0,l.$Z,x.ng,R.Q,A.l,b.b,d.Ip,d.Vq,C.Ls,O.N,I.r,J.p,M.SY,p.Ov],styles:["#heading[_ngcontent-%COMP%]{color:#000000e0;font-weight:600;font-size:20px;line-height:32px;font-style:normal;margin-bottom:8px}wlx-pagination[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]{width:100%;flex-direction:row;display:flex;align-items:center;margin-bottom:16px}#count[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:24px;color:#00000073;margin:0}wlx-filters[_ngcontent-%COMP%]{margin-left:auto}#description[_ngcontent-%COMP%]{text-align:justify;font-weight:400;font-size:16px;line-height:24px;color:#000000a6;max-width:800px;font-style:normal;margin-bottom:24px}.autocomplete-input-column[_ngcontent-%COMP%]{padding:16px}.table-header[_ngcontent-%COMP%], .fixed-size[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0;min-width:369.33px;width:369.33px}.tooltip[_ngcontent-%COMP%]{cursor:pointer;margin:4px 3px;color:#00000073}.post_status[_ngcontent-%COMP%]{min-width:105px;margin-left:8px;margin-right:8px}.items_sort[_ngcontent-%COMP%]{min-width:164px;margin-left:8px}.links[_ngcontent-%COMP%]{display:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:21px;height:16px;color:#007aff;font-style:normal;font-weight:400;font-size:12px;line-height:16px}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{border-right:1px solid rgba(0,0,0,.15);margin-right:6px;padding-right:6px}td[_ngcontent-%COMP%]{height:80px}.links-main[_ngcontent-%COMP%]{height:16px}td[_ngcontent-%COMP%]:hover   .links[_ngcontent-%COMP%]{display:block}.td-align[_ngcontent-%COMP%]{padding-top:0}.recipes-draft[_ngcontent-%COMP%]{color:#000000a6;font-size:14px;font-style:normal;font-weight:400;line-height:24px}@media only screen and (max-width: 1368px){.table-header[_ngcontent-%COMP%]{min-width:auto;width:auto}}"]}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(V),m.Bz]}),n})();var K=i(2271),k=i(5635),j=i(4586),B=i(2383),W=i(5540);let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,$,c.u5,u.ZJ,l.HQ,x.H0,K.m,d.LV,k.o7,j.D,B.ic,C.PV,W.o,M.cg]}),n})()}}]);