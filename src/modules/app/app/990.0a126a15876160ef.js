"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[990],{1990:(W,f,e)=>{e.r(f),e.d(f,{IngredientsModule:()=>g});var h=e(6895),z=e(8176),I=e(7579),C=e(8505),b=e(4351),Z=e(9635),P=e(5698),w=e(6150),n=e(4650),O=e(7548),x=e(8800),s=e(13),_=e(7570),M=e(6616),S=e(7044),A=e(1664),J=e(5087),F=e(1354),N=e(1723),m=e(433),v=e(7423),Q=e(5505),T=e(9562),y=e(5635);function U(a,i){1&a&&n.GkF(0)}function E(a,i){if(1&a){const t=n.EpF();n.TgZ(0,"div",21)(1,"p",22),n._uU(2),n.qZA(),n.TgZ(3,"wlx-filters",23),n.NdJ("filterChange",function(r){n.CHM(t);const p=n.oxw();return n.KtG(p.filter=r)})("filterChange",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.cursor.next(""))}),n.qZA()()}if(2&a){const t=n.oxw();n.xp6(2),n.AsE("",t.ingredient.total," ",t.ingredient.label,""),n.xp6(1),n.Q6J("filter",t.filter)("stats",t.ingredient)}}function R(a,i){if(1&a){const t=n.EpF();n.TgZ(0,"tr",25)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",26)(4,"wlx-main-ingredient",27),n.NdJ("onMainIngredientChange",function(r){const l=n.CHM(t).$implicit,u=n.oxw(2);return n.KtG(u.ingredientChange(l,r))})("onStartEdit",function(){const p=n.CHM(t).$implicit,l=n.oxw(2);return n.KtG(l.startEdit(p.id))})("onStopEdit",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.stopEdit())}),n.qZA()(),n.TgZ(5,"td"),n._uU(6),n.qZA()()}if(2&a){const t=i.$implicit,o=i.index,r=n.oxw(2);n.xp6(2),n.hij(" ",t.name," "),n.xp6(2),n.Q6J("data",t)("wlxCyId","AutoCompleteField"+o)("editMode",r.editId===t.id),n.xp6(2),n.hij(" ",t.occurrences," ")}}function D(a,i){if(1&a&&(n.TgZ(0,"tbody"),n.YNc(1,R,7,5,"tr",24),n.qZA()),2&a){n.oxw();const t=n.MAs(8);n.xp6(1),n.Q6J("ngForOf",t.data)}}const $=function(){return[]};class c{constructor(i,t){this.appSettings=i,this.termMatchesService=t,this.cursor=new I.x,this.editId=null,this.perPage={value:10},this.termContains="",this.visible=!1,this.cursor$=this.cursor.asObservable().pipe((0,C.b)(()=>{this.loading=!0}),(0,b.b)(o=>this.termMatchesService.listTermMatches({taxonomies:"wprm_ingredient",cursor:o,has_match:this.filter,limit:this.perPage.value,sort:this.sort})),(0,Z.z)((0,C.b)(o=>{this.page=o,this.loading=!1}))),this.loading=!0,this.Number=Number,this.ingredient=i.stats.find(o=>"Ingredients"===o.label)}ngOnInit(){this.reload()}reload(){this.loading=!0,this.termMatchesService.listTermMatches({taxonomies:"wprm_ingredient",has_match:this.filter,limit:this.perPage.value,sort:this.sort,term_contains:this.termContains.length>0?this.termContains:void 0}).subscribe(i=>{this.page=i,this.loading=!1})}ingredientChange(i,t){(Number.isInteger(i.match_id)?this.termMatchesService.updateTermMatch({term_id:i.id,match_id:i.match_id,body:t}):this.termMatchesService.createTermMatch({term_id:i.id,body:t})).pipe((0,P.q)(1)).subscribe()}startEdit(i){this.editId=i}stopEdit(){this.editId=null}search(){this.cursor.next("")}reset(){this.termContains="",this.cursor.next("")}onQueryParamsChange(i){const{sort:r}=i,l=r.find(V=>null!==V.value),u=l&&l.key||null;u&&(this.sort=("descend"===(l&&l.value||null)?"-":"+")+u),this.reload()}}c.\u0275fac=function(i){return new(i||c)(n.Y36(w.N),n.Y36(O.a0))},c.\u0275cmp=n.Xpm({type:c,selectors:[["wlx-ingredients"]],decls:33,vars:21,consts:[[4,"ngIf"],["nz-typography","","id","heading"],["nz-typography","","nzType","secondary","id","description"],["id","filters",4,"ngIf"],[3,"nzData","nzNoResult","nzShowPagination","nzFrontPagination","nzTotal","nzLoading","nzQueryParams"],["basicTable",""],["nzWidth","464px","nzCustomFilter","","nzColumnKey","term_name",1,"table-header",3,"nzSortFn"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The ingredient from the WPRM plugin ingredients taxonomy",1,"tooltip"],["nzWidth","464px","nzColumnKey","entity_name",1,"table-header",3,"nzSortFn"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The ingredient entity matching the WPRM plugin ingredient.",1,"tooltip"],["nzWidth","180px",1,"table-header"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Occurrences.",1,"tooltip"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["wlxCy","","wlxCyId","IngredientsPagination",3,"page","cursor","perPage"],["id","filters"],["id","count"],["wlxCy","","wlxCyId","IngredientsFilters",3,"filter","stats","filterChange"],["class","editable-row",4,"ngFor","ngForOf"],[1,"editable-row"],[1,"autocomplete-input-column"],["wlxCy","","datasetUri","https://knowledge.cafemedia.com/food/",1,"autocomplete-input","editable-cell",3,"data","wlxCyId","editMode","onMainIngredientChange","onStartEdit","onStopEdit"]],template:function(i,t){if(1&i&&(n.YNc(0,U,1,0,"ng-container",0),n.ALo(1,"async"),n.TgZ(2,"h1",1),n._uU(3,"Ingredients"),n.qZA(),n.TgZ(4,"p",2),n._uU(5,' This is the list of Ingredients. For each Ingredient, WordLift matched the ingredient entity which will show in the Structured Data "mentions" property To assign a new ingredient, click on the name (or on the dash) and start typing to select it from the list. Then click anywhere to accept the change.\n'),n.qZA(),n.YNc(6,E,4,4,"div",3),n.TgZ(7,"nz-table",4,5),n.NdJ("nzQueryParams",function(r){return t.onQueryParamsChange(r)}),n.TgZ(9,"thead")(10,"tr")(11,"th",6),n._uU(12," Ingredient Term "),n.TgZ(13,"nz-filter-trigger",7),n.NdJ("nzVisibleChange",function(r){return t.visible=r}),n._UZ(14,"span",8),n.qZA(),n._UZ(15,"span",9),n.qZA(),n.TgZ(16,"th",10),n._uU(17," Matched Ingredient "),n._UZ(18,"span",11),n.qZA(),n.TgZ(19,"th",12),n._uU(20," Occurrences "),n._UZ(21,"span",13),n.qZA()()(),n.YNc(22,D,2,1,"tbody",0),n.qZA(),n.TgZ(23,"nz-dropdown-menu",null,14)(25,"div",15)(26,"div",16)(27,"input",17),n.NdJ("ngModelChange",function(r){return t.termContains=r}),n.qZA(),n.TgZ(28,"button",18),n.NdJ("click",function(){return t.reload()}),n._uU(29," Search "),n.qZA(),n.TgZ(30,"button",19),n.NdJ("click",function(){return t.reset()}),n._uU(31,"Reset"),n.qZA()()()(),n._UZ(32,"wlx-pagination",20)),2&i){const o=n.MAs(24);n.Q6J("ngIf",n.lcZ(1,18,t.cursor$)),n.xp6(6),n.Q6J("ngIf",t.page),n.xp6(1),n.Q6J("nzData",t.page&&t.page.items?t.page.items:n.DdM(20,$))("nzNoResult",void 0)("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",t.Number.MAX_SAFE_INTEGER)("nzLoading",t.loading),n.xp6(4),n.Q6J("nzSortFn",!0),n.xp6(2),n.Q6J("nzVisible",t.visible)("nzActive",t.termContains.length>0)("nzDropdownMenu",o),n.xp6(3),n.Q6J("nzSortFn",!0),n.xp6(6),n.Q6J("ngIf",!t.loading),n.xp6(5),n.Q6J("ngModel",t.termContains),n.xp6(5),n.Q6J("page",t.page)("cursor",t.cursor)("perPage",t.perPage)}},dependencies:[h.sg,h.O5,x.ZU,s.N8,s.qD,s.Uo,s._C,s.Om,s.p0,s.$Z,s.Ql,_.SY,M.ix,S.w,A.dQ,J.Q,F.l,N.b,m.Fj,m.JJ,m.On,v.Ls,Q.N,T.RR,y.Zp,h.Ov],styles:["wlx-pagination[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]{width:100%;flex-direction:row;display:flex;align-items:center;margin-top:18px;margin-bottom:16px}#count[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:19px;color:#00000073;margin:0}.table-header[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0}.tooltip[_ngcontent-%COMP%]{cursor:pointer;margin:4px 3px;color:#00000073}.autocomplete-input[_ngcontent-%COMP%]{width:320px;height:32px;display:block}.autocomplete-input-column[_ngcontent-%COMP%]{padding:16px}nz-button-group[_ngcontent-%COMP%]{margin-left:auto}#heading[_ngcontent-%COMP%]{font-weight:600;font-size:20px;line-height:32px}#description[_ngcontent-%COMP%]{text-align:justify;font-weight:400;font-size:16px;line-height:24px;color:#000000a6;width:600px}wlx-filters[_ngcontent-%COMP%]{margin-left:auto}.editable-cell[_ngcontent-%COMP%]{position:relative;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px}.editable-cell[_ngcontent-%COMP%]:focus-within{border:none}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px}.ant-btn-sm[_ngcontent-%COMP%]{height:30px}"]});const j=[{path:"",pathMatch:"full",redirectTo:"ingredients"},{path:"ingredients",data:{breadcrumb:"Ingredients"},component:c}];class d{}d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=n.oAB({type:d}),d.\u0275inj=n.cJS({imports:[z.Bz.forChild(j),z.Bz]});var G=e(545),H=e(2271),K=e(8521),Y=e(5540);class g{}g.\u0275fac=function(i){return new(i||g)},g.\u0275mod=n.oAB({type:g}),g.\u0275inj=n.cJS({imports:[h.ez,d,x.ZJ,s.HQ,G.H0,_.cg,M.sL,H.m,K.aF,m.u5,v.PV,Y.o,T.b1,y.o7]})}}]);