"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[990],{1990:(tt,m,i)=>{i.r(m),i.d(m,{IngredientsModule:()=>X});var g=i(6895),u=i(8176),I=i(7579),f=i(8505),Z=i(4351),w=i(9635),P=i(5698),b=i(6150),t=i(4650),A=i(7548),z=i(8800),l=i(13),x=i(545),C=i(7570),_=i(6616),O=i(7044),J=i(1664),S=i(5087),Q=i(1354),F=i(1723),c=i(433),T=i(7423),N=i(5505),U=i(3304),E=i(36),v=i(9562),M=i(5635);function R(e,a){1&e&&t.GkF(0)}function D(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",21)(1,"p",22),t._uU(2),t.qZA(),t.TgZ(3,"wlx-filters",23),t.NdJ("filterChange",function(r){t.CHM(n);const s=t.oxw();return t.KtG(s.filter=r)})("filterChange",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.cursor.next(""))}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.AsE("",n.ingredient.total," ",n.ingredient.label,""),t.xp6(1),t.Q6J("filter",n.filter)("stats",n.ingredient)}}function Y(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"tr",25)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",26)(4,"wlx-main-ingredient",27),t.NdJ("onMainIngredientChange",function(r){const p=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.ingredientChange(p,r))})("onStartEdit",function(){const s=t.CHM(n).$implicit,p=t.oxw(2);return t.KtG(p.startEdit(s.id))})("onStopEdit",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.stopEdit())}),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.qZA()()}if(2&e){const n=a.$implicit,o=a.index,r=t.oxw(2);t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("data",n)("wlxCyId","AutoCompleteField"+o)("editMode",r.editId===n.id),t.xp6(2),t.hij(" ",n.occurrences," ")}}function H(e,a){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Y,7,5,"tr",24),t.qZA()),2&e){t.oxw();const n=t.MAs(8);t.xp6(1),t.Q6J("ngForOf",n.data)}}const h=function(){return{rows:1}};function $(e,a){1&e&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"nz-skeleton",29),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-skeleton",29),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nz-skeleton",29),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(9,h))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(10,h))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(11,h))("nzTitle",!1))}function j(e,a){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,$,7,12,"tr",28),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.skeletonRows)}}const G=function(){return[]},K=[{path:"",pathMatch:"full",redirectTo:"ingredients"},{path:"ingredients",data:{breadcrumb:"Ingredients"},component:(()=>{class e{constructor(n,o){this.appSettings=n,this.termMatchesService=o,this.cursor=new I.x,this.editId=null,this.perPage={value:10},this.termContains="",this.visible=!1,this.skeletonRows=[],this.cursor$=this.cursor.asObservable().pipe((0,f.b)(()=>{this.skeletonRows=Array(this.perPage.value),this.loading=!0}),(0,Z.b)(r=>this.termMatchesService.listTermMatches({taxonomies:"wprm_ingredient",cursor:r,has_match:this.filter,limit:this.perPage.value,sort:this.sort})),(0,w.z)((0,f.b)(r=>{this.page=r,this.loading=!1}))),this.loading=!0,this.Number=Number,this.ingredient=n.stats.find(r=>"Ingredients"===r.label)}ngOnInit(){this.reload()}reload(){this.skeletonRows=Array(this.perPage.value),this.loading=!0,this.termMatchesService.listTermMatches({taxonomies:"wprm_ingredient",has_match:this.filter,limit:this.perPage.value,sort:this.sort,term_contains:this.termContains.length>0?this.termContains:void 0}).subscribe(n=>{this.page=n,this.loading=!1})}ingredientChange(n,o){(Number.isInteger(n.match_id)?this.termMatchesService.updateTermMatch({term_id:n.id,match_id:n.match_id,body:o}):this.termMatchesService.createTermMatch({term_id:n.id,body:o})).pipe((0,P.q)(1)).subscribe()}startEdit(n){this.editId=n}stopEdit(){this.editId=null}search(){this.cursor.next("")}reset(){this.termContains="",this.cursor.next("")}onQueryParamsChange(n){const{sort:s}=n,d=s.find(q=>null!==q.value),y=d&&d.key||null;y&&(this.sort=("descend"===(d&&d.value||null)?"-":"+")+y),this.reload()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(b.N),t.Y36(A.a0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["wlx-ingredients"]],decls:34,vars:20,consts:[[4,"ngIf"],["nz-typography","","id","heading"],["nz-typography","","nzType","secondary","id","description"],["id","filters",4,"ngIf"],["wlxHideTablePlaceholder","",3,"nzData","nzNoResult","nzShowPagination","nzFrontPagination","nzTotal","nzQueryParams"],["basicTable",""],["nzCustomFilter","","nzColumnKey","term_name",1,"table-header",3,"nzSortFn"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The ingredient from the WPRM plugin ingredients taxonomy",1,"tooltip"],["nzColumnKey","entity_name",1,"fixed-size"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The ingredient entity matching the WPRM plugin ingredient.",1,"tooltip"],[1,"small-size"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","The number of recipes where an ingredient is used.",1,"tooltip"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["wlxCy","","wlxCyId","IngredientsPagination",3,"page","cursor","perPage"],["id","filters"],["id","count"],["wlxCy","","wlxCyId","IngredientsFilters",3,"filter","stats","filterChange"],["class","editable-row",4,"ngFor","ngForOf"],[1,"editable-row"],[1,"autocomplete-input-column"],["wlxCy","","datasetUri","https://knowledge.cafemedia.com/food/",3,"data","wlxCyId","editMode","onMainIngredientChange","onStartEdit","onStopEdit"],[4,"ngFor","ngForOf"],["wlxSkeletonWidth","",3,"nzActive","nzParagraph","nzTitle"]],template:function(n,o){if(1&n&&(t.YNc(0,R,1,0,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3,"Ingredients"),t.qZA(),t.TgZ(4,"p",2),t._uU(5,' For each Ingredient, WordLift matched the ingredient entity which appears in the Structured Data "mentions" property. To assign a new ingredient, click on the name (or on the dash) and start typing to select it from the list. Then click anywhere to confirm the change.\n'),t.qZA(),t.YNc(6,D,4,4,"div",3),t.TgZ(7,"nz-table",4,5),t.NdJ("nzQueryParams",function(s){return o.onQueryParamsChange(s)}),t.TgZ(9,"thead")(10,"tr")(11,"th",6),t._uU(12," Ingredient Term "),t.TgZ(13,"nz-filter-trigger",7),t.NdJ("nzVisibleChange",function(s){return o.visible=s}),t._UZ(14,"span",8),t.qZA(),t._UZ(15,"span",9),t.qZA(),t.TgZ(16,"th",10),t._uU(17," Matched Ingredient "),t._UZ(18,"span",11),t.qZA(),t.TgZ(19,"th",12),t._uU(20," Occurrences "),t._UZ(21,"span",13),t.qZA()()(),t.YNc(22,H,2,1,"tbody",0),t.YNc(23,j,2,1,"tbody",0),t.qZA(),t.TgZ(24,"nz-dropdown-menu",null,14)(26,"div",15)(27,"div",16)(28,"input",17),t.NdJ("ngModelChange",function(s){return o.termContains=s}),t.qZA(),t.TgZ(29,"button",18),t.NdJ("click",function(){return o.reload()}),t._uU(30," Search "),t.qZA(),t.TgZ(31,"button",19),t.NdJ("click",function(){return o.reset()}),t._uU(32,"Reset"),t.qZA()()()(),t._UZ(33,"wlx-pagination",20)),2&n){const r=t.MAs(25);t.Q6J("ngIf",t.lcZ(1,17,o.cursor$)),t.xp6(6),t.Q6J("ngIf",o.page),t.xp6(1),t.Q6J("nzData",o.page&&o.page.items?o.page.items:t.DdM(19,G))("nzNoResult",void 0)("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",o.Number.MAX_SAFE_INTEGER),t.xp6(4),t.Q6J("nzSortFn",!0),t.xp6(2),t.Q6J("nzVisible",o.visible)("nzActive",o.termContains.length>0)("nzDropdownMenu",r),t.xp6(9),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(5),t.Q6J("ngModel",o.termContains),t.xp6(5),t.Q6J("page",o.page)("cursor",o.cursor)("perPage",o.perPage)}},dependencies:[g.sg,g.O5,z.ZU,l.N8,l.qD,l.Uo,l._C,l.Om,l.p0,l.$Z,l.Ql,x.ng,C.SY,_.ix,O.w,J.dQ,S.Q,Q.l,F.b,c.Fj,c.JJ,c.On,T.Ls,N.N,U.r,E.p,v.RR,M.Zp,g.Ov],styles:["wlx-pagination[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]{width:100%;flex-direction:row;display:flex;align-items:center;margin-bottom:16px}#count[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:24px;color:#00000073;margin:0}.table-header[_ngcontent-%COMP%], .fixed-size[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0;min-width:464px;width:464px}.small-size[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0;width:180px;min-width:180px}.tooltip[_ngcontent-%COMP%]{cursor:pointer;margin:4px 3px;color:#00000073}.autocomplete-input-column[_ngcontent-%COMP%]{padding:16px}nz-button-group[_ngcontent-%COMP%]{margin-left:auto}#heading[_ngcontent-%COMP%]{color:#000000e0;font-weight:600;font-size:20px;line-height:32px;font-style:normal;margin-bottom:8px}#description[_ngcontent-%COMP%]{text-align:justify;font-weight:400;font-size:16px;line-height:24px;color:#000000a6;max-width:800px;font-style:normal;margin-bottom:24px}wlx-filters[_ngcontent-%COMP%]{margin-left:auto}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px}.ant-btn-sm[_ngcontent-%COMP%]{height:30px}@media only screen and (max-width: 1368px){.table-header[_ngcontent-%COMP%]{min-width:auto;width:auto}}"]}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(K),u.Bz]}),e})();var B=i(2271),L=i(8521),W=i(5540);let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,V,z.ZJ,l.HQ,x.H0,C.cg,_.sL,B.m,L.aF,c.u5,T.PV,W.o,v.b1,M.o7]}),e})()}}]);