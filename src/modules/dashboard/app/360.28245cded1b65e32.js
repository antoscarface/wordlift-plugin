"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[360],{6360:(B,m,o)=>{o.r(m),o.d(m,{RecipesModule:()=>p});var l=o(6895),u=o(8176),z=o(7779),y=o(7579),C=o(4351),Z=o(9635),g=o(8505),T=o(262),M=o(515),A=o(5698),R=o(9300),t=o(4650),S=o(240),b=o(6645),f=o(8800),r=o(6666),v=o(545),w=o(5087),I=o(1354);function J(i,e){1&i&&t.GkF(0)}const O=function(){return{width:325}},E=function(){return{width:100}};function Q(i,e){if(1&i&&(t.TgZ(0,"tr",7)(1,"td"),t._UZ(2,"nz-skeleton",8),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-skeleton",8),t.qZA()()),2&i){const n=t.oxw(2);t.xp6(2),t.Q6J("nzActive",!0)("nzLoading",n.loading)("nzParagraph",!1)("nzTitle",t.DdM(8,O)),t.xp6(2),t.Q6J("nzActive",!0)("nzLoading",n.loading)("nzParagraph",!1)("nzTitle",t.DdM(9,E))}}function U(i,e){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Q,5,10,"tr",6),t.qZA()),2&i){t.oxw();const n=t.MAs(7);t.xp6(1),t.Q6J("ngForOf",n.data)}}function F(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"tr",10)(1,"td")(2,"a",11),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td")(7,"wlx-main-ingredient",12),t.NdJ("onMainIngredientChange",function(a){const h=t.CHM(n).$implicit,j=t.oxw(2);return t.KtG(j.ingredientChange(h,a))})("onStartEdit",function(){const x=t.CHM(n).$implicit,h=t.oxw(2);return t.KtG(h.startEdit(x.id))})("onStopEdit",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.stopEdit())}),t.qZA()()()}if(2&i){const n=e.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("href",n.post_permalink,t.LSH),t.xp6(1),t.Oqu(n.name),t.xp6(2),t.hij(" ",n.recipe_name," "),t.xp6(2),t.Q6J("data",n)("editMode",s.editId===n.id)}}function P(i,e){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,F,8,5,"tr",9),t.qZA()),2&i){t.oxw();const n=t.MAs(7);t.xp6(1),t.Q6J("ngForOf",n.data)}}const N=function(){return[]};class c{constructor(e,n,s){this.liftedItems=e,this.apiService=n,this.mainIngredientsApiService=s,this.loading=!1,this.editId=null,this.filter="ALL",this.filteredOptions=[],this.cursor=new y.x,this.cursor$=this.cursor.asObservable().pipe((0,R.h)(a=>null!=a),(0,C.b)(a=>this.apiService.list({post_type:"wprm_recipe",cursor:a})),(0,Z.z)((0,g.b)(a=>{this.page=a}))),this.recipes=e.find(a=>"Recipes"===a.label)}onChange(e){const n=e.target.value;console.log(e.target.value),this.mainIngredientsApiService.get({query:n}).pipe((0,g.b)(()=>this.loading=!1),(0,T.K)(s=>M.E)).subscribe(s=>console.log(s))}ngOnInit(){this.apiService.list({post_type:"wprm_recipe"}).pipe((0,g.b)(()=>this.loading=!1)).subscribe(e=>{this.page=e})}ingredientChange(e,n){(e.match_id?this.apiService.create({post_id:e.id,body:n}):this.apiService.update({post_id:e.id,match_id:e.match_id,body:n})).pipe((0,A.q)(1)).subscribe()}startEdit(e){this.editId=e}stopEdit(){this.editId=null}}c.\u0275fac=function(e){return new(e||c)(t.Y36(z.S),t.Y36(S.s),t.Y36(b.s))},c.\u0275cmp=t.Xpm({type:c,selectors:[["wlx-recipes"]],decls:19,vars:11,consts:[[4,"ngIf"],["nz-typography",""],["nz-typography","","nzType","secondary"],[3,"nzData","nzNoResult","nzShowPagination"],["basicTable",""],[3,"page","cursor"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"nzActive","nzLoading","nzParagraph","nzTitle"],["class","table-row editable-row",4,"ngFor","ngForOf"],[1,"table-row","editable-row"],["target","_blank",3,"href"],[3,"data","editMode","onMainIngredientChange","onStartEdit","onStopEdit"]],template:function(e,n){1&e&&(t.YNc(0,J,1,0,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3,"Recipes"),t.qZA(),t.TgZ(4,"p",2),t._uU(5," Some copy that explains what is on this screen and how to work with it. Maybe it\u2019s a couple of sentences for two 3 rows of text maximum\n"),t.qZA(),t.TgZ(6,"nz-table",3,4)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Post title"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Ingredient Term"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Matched Ingredient"),t.qZA()()(),t.YNc(16,U,2,1,"tbody",0),t.YNc(17,P,2,1,"tbody",0),t.qZA(),t._UZ(18,"wlx-pagination",5)),2&e&&(t.Q6J("ngIf",t.lcZ(1,8,n.cursor$)),t.xp6(6),t.Q6J("nzData",n.page&&n.page.items?n.page.items:t.DdM(10,N))("nzNoResult",void 0)("nzShowPagination",!1),t.xp6(10),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("page",n.page)("cursor",n.cursor))},dependencies:[l.sg,l.O5,f.ZU,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,v.ng,w.Q,I.l,l.Ov],styles:[".editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}wlx-pagination[_ngcontent-%COMP%]{width:100%}"]});const L=[{path:"",pathMatch:"full",redirectTo:"recipes"},{path:"recipes",data:{breadcrumb:"Recipes"},component:c}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[u.Bz.forChild(L),u.Bz]});var Y=o(2271),$=o(8231),D=o(5635),H=o(4586),_=o(2383);class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[l.ez,d,f.ZJ,r.HQ,v.H0,Y.m,$.LV,D.o7,H.D,_.ic]})}}]);